# Matomo Plugin Creator — Claude Skill

A structured skill for Claude that generates production-ready Matomo analytics plugins
through a 6-phase development process.

## What This Skill Does

When activated, this skill guides Claude through a methodical plugin development workflow:

1. **Requirements Gathering** — Asks targeted questions about scope, PHP/Matomo version,
   packaging level, and optional live API validation
2. **Architecture Planning** — Produces a detailed architecture document (module plan,
   DB schema, event hooks, API endpoints, access control) for user review before any
   code is written
3. **Modular Implementation** — Builds each module as a separate unit (Core → Tracking →
   Archiver → API → Reporting → Admin UI → Tasks) with status reports between modules
4. **QA & Testing** — Syntax checks, namespace consistency, performance review
5. **Security Audit** — CSRF, SQL injection, XSS, access control, and dependency audit
   based on Matomo's official Security Best Practices
6. **Packaging & Delivery** — Lightweight or Marketplace-ready output with optional
   GitHub setup

## Supported Plugin Types

| Type | Capabilities |
|------|-------------|
| **Tracking** | Custom visit/action dimensions, tracker.js extensions, Tag Manager integration |
| **Reporting** | Custom reports, widgets, API methods, RecordBuilder archiving (Matomo 5.x) |
| **Admin** | System/User/Measurable settings, controller pages, menu entries |
| **Combined** | Any combination of the above in a single plugin |

## Skill Structure

```
matomo-plugin-creator/
├── SKILL.md                           — Main workflow instructions (6-phase process)
├── Claude.md                          — Project instructions (code standards, phase rules)
├── memory.md                          — Decision log & evolving project context
├── README.md                          — This file
├── references/
│   ├── plugin-types.md                — Tracking, Reporting, Admin class templates + Vue 3
│   ├── archiver-patterns.md           — RecordBuilder (preferred) + classic Archiver
│   ├── security-checklist.md          — Full security audit checklist with code examples
│   ├── permissions-reference.md       — Matomo roles, check methods, access patterns
│   └── marketplace-scaffolding.md     — plugin.json, README, publishing, checklist
└── assets/
    └── gpl-v3-header.txt              — Standard GPL v3+ PHP file header
```

## Key Design Principles

- **Plan before build** — Architecture must be confirmed by the user before code is written
- **Core methods first** — Uses only Matomo Core classes; no external dependencies without justification
- **Security by default** — Mandatory security audit phase with Matomo-specific checks
- **Modular delivery** — Each component (API, Admin UI, Archiver, etc.) is a separate unit

## Project Files

### Claude.md
Project-level instructions that define Claude's behavior when using this skill:
code standards, phase discipline, what Claude must and must not do, and when to
suggest companion skills. Think of it as the "system prompt" for this skill.

### memory.md
A persistent decision log that tracks architectural choices, reference sources,
and per-plugin context. Updated as the user makes decisions (e.g. Matomo version,
archiver pattern, UI approach). Ensures consistency across long conversations.

## Recommended Companion Skills

For best results, consider using these skills alongside the Matomo Plugin Creator:

| Skill | Use for |
|-------|---------|
| **doc-coauthoring** | Co-authoring plugin documentation, user guides, specs |
| **frontend-design** | Polishing Vue 3 components or admin page layouts |
| **skill-creator** | Iterating and benchmarking this skill's performance |

## Requirements

- Claude with computer use / file creation enabled
- No external tools needed (pure code generation)
- Optional: Matomo API token for live validation

## ⚠️ Disclaimer — Use at Your Own Risk

**This skill generates code using AI. AI-generated code may contain bugs, security
vulnerabilities, or architectural issues that are not immediately apparent.**

Before deploying any plugin generated by this skill to a production environment:

1. **Have the code reviewed** by an experienced PHP/Matomo developer
2. **Run a manual security audit** against [Matomo's Security Best Practices](https://developer.matomo.org/guides/security-in-piwik)
3. **Test thoroughly** in a staging environment with realistic data
4. **Back up your database** before activating plugins that create custom tables
5. **Monitor error logs** after activation for unexpected issues

The authors of this skill accept no liability for data loss, security breaches, or
any other damages resulting from the use of AI-generated plugin code. Use of this
skill and its outputs is entirely at your own risk.

This disclaimer applies to all code, configuration, and documentation generated
by this skill.

## License

The skill itself is provided as-is. Plugins generated by this skill are licensed
under GPL v3+ by default (required for the Matomo Marketplace).

## Sources

This skill's reference materials are derived from:

- [Matomo Developer Documentation](https://developer.matomo.org/) (v5)
- [Matomo Security Best Practices](https://developer.matomo.org/guides/security-in-piwik)
- [Matomo Plugin Archiver API](https://developer.matomo.org/api-reference/Piwik/Plugin/Archiver)
- [Matomo GitHub Repository](https://github.com/matomo-org/matomo) (5.x-dev branch)
- [Matomo Marketplace Publishing Guide](https://developer.matomo.org/guides/distributing-your-plugin)
